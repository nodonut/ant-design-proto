(this["webpackJsonpant-design-table-proto"]=this["webpackJsonpant-design-table-proto"]||[]).push([[0],{233:function(e,t,n){},234:function(e,t,n){},389:function(e,t,n){"use strict";n.r(t);var a=n(11),r=n(0),o=n.n(r),c=n(32),i=n.n(c),s=(n(233),n(234),n(390)),l=n(393),u=n(90),d=n(392),h=n(142),j=n(395),g=s.a.Header,m=l.a.Title,b={display:"flex",justifyContent:"flex-start",alignItems:"center",paddingTop:"2em",paddingBottom:"2em"};var p=function(){var e=Object(a.jsxs)(u.a,{className:"categories",children:[Object(a.jsx)(u.a.Item,{children:Object(a.jsx)("a",{target:"_blank",children:"Airlines"})}),Object(a.jsx)(u.a.Item,{children:Object(a.jsx)("a",{target:"_blank",children:"Airports"})}),Object(a.jsx)(u.a.Item,{children:Object(a.jsx)("a",{target:"_blank",children:"Hotels"})}),Object(a.jsx)(u.a.Item,{children:Object(a.jsx)("a",{target:"_blank",children:"Mobility"})}),Object(a.jsx)(u.a.Item,{children:Object(a.jsx)("a",{target:"_blank",children:"Activities/Events"})}),Object(a.jsx)(u.a.Item,{children:Object(a.jsx)("a",{target:"_blank",children:"Amusement Parks"})}),Object(a.jsx)(u.a.Item,{children:Object(a.jsx)("a",{target:"_blank",children:"Museums"})}),Object(a.jsx)(u.a.Item,{children:Object(a.jsx)("a",{target:"_blank",children:"Cruises"})}),Object(a.jsx)(u.a.Item,{children:Object(a.jsx)("a",{target:"_blank",children:"Short Term Rentals"})})]});return Object(a.jsxs)(g,{style:b,children:[Object(a.jsx)(m,{style:{color:"whitesmoke",marginTop:"0.5em"},children:Object(a.jsx)(d.a,{src:"https://app.safetravelbarometer.com/images/logos/stb-white-250-63.png",height:40,width:170})}),Object(a.jsx)(u.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["1"],style:{margin:"2em 2em"},children:Object(a.jsx)(u.a.Item,{children:"Dashboard"},"1")}),Object(a.jsx)(h.a,{overlay:e,children:Object(a.jsxs)("a",{className:"ant-dropdown-link",onClick:function(e){return e.preventDefault()},children:["Categories ",Object(a.jsx)(j.a,{})]})}),","]})},f=n(91),O=n(9),y=n(14),x=n(16),v=n(18),C=n(24),k=n(113),_=n(394),w=n(391),S=n(73),I=n(396),T=n(397);function q(){var e=Object(f.a)(["\n      query($country: Mixed!) {\n        companies(hasCountry: { column: NAME, value: $country }) {\n          data {\n            id\n            name\n            rating\n            logo\n          }\n        }\n      }\n    "]);return q=function(){return e},e}function E(){var e=Object(f.a)(["\n      query {\n        countries {\n          name\n        }\n      }\n    "]);return E=function(){return e},e}function M(){var e=Object(f.a)(["\n      query($searchInput: Mixed!) {\n        companies(where: { column: NAME, value: $searchInput }) {\n          data {\n            id\n            name\n            logo\n            rating\n          }\n        }\n      }\n    "]);return M=function(){return e},e}function A(){var e=Object(f.a)(["\n          query {\n            buckets {\n              id\n              name\n              description\n              parameters {\n                id\n                name\n                category {\n                  name\n                }\n                description\n              }\n            }\n          }\n        "]);return A=function(){return e},e}function $(){var e=Object(f.a)(["\n      query companies($page: Int!, $pageSize: Int!) {\n        companies(page: $page, first: $pageSize) {\n          paginatorInfo {\n            perPage\n            hasMorePages\n            currentPage\n            total\n          }\n          data {\n            id\n            name\n            rating\n            company_parameter_values_for_employee {\n              parameter {\n                role\n                name\n              }\n            }\n          }\n        }\n      }\n    "]);return $=function(){return e},e}function D(){var e=Object(f.a)(["\n      query companies($page: Int!) {\n        companies(page: $page, first: 100) {\n          paginatorInfo {\n            perPage\n            hasMorePages\n            currentPage\n            total\n          }\n          data {\n            id\n            name\n            logo\n            rating\n            category {\n              id\n              name\n            }\n            company_parameter_values_for_employee {\n              parameter {\n                role\n                name\n              }\n            }\n          }\n        }\n      }\n    "]);return D=function(){return e},e}var N=new S.ApolloClient({uri:"https://dev.app.safetravelbarometer.com/api",cache:new S.InMemoryCache}),P=[],z=k.a.Option,B=k.a.OptGroup,L=[{key:"01",title:"Name",dataIndex:"name",sorter:function(e,t){return e.name.length-t.name.length},sortDirections:["descend"]},{key:"02",dataIndex:"imageurl",render:function(e){return Object(a.jsx)("img",{src:e})}},{key:"03",title:"Rating",dataIndex:"rating"}],F=[],V=function(e){Object(v.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(y.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={columns:[].concat(L),filteredCols:[],defaultValue:[],columnIds:[],data:[],pagination:{current:1},loading:!1,buckets:[],searchInput:"",countries:[],category:"airlines",airlineCols:[]},e.handleChange=function(t){e.setState({filteredCols:[].concat(Object(O.a)(L.filter((function(e){return"Score"===e.title}))),Object(O.a)(L.filter((function(e){return"Name"===e.title}))),Object(O.a)(L.filter((function(e){return t.includes(e.key)}))))})},e}return Object(x.a)(n,[{key:"componentDidMount",value:function(){this.loadData(),this.populateBuckets(),this.populateCountrySelect()}},{key:"loadData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.setState({loading:!0});var n=Object(S.gql)(D());N.query({query:n,variables:{page:t}}).then((function(t){console.log(t);var n=t.data.companies.paginatorInfo.total;t.data.companies.data.forEach((function(t){if(t.category.name.toLowerCase()===e.state.category)return P.push({key:t.id,rating:t.rating,imageurl:t.logo,name:t.name,category:t.category.name,thermal_screening:Object(a.jsx)(I.a,{twoToneColor:"#52c41a"}),face_masks:Object(a.jsx)(I.a,{twoToneColor:"#52c41a"}),hand_sanitizer:Object(a.jsx)(T.a,{twoToneColor:"orange"}),health_dec_form:Object(a.jsx)(T.a,{twoToneColor:"orange"}),test_bucket_parameter:Object(a.jsx)(T.a,{twoToneColor:"orange"})})})),e.setState({category:"",loading:!1,data:P,pagination:{total:n}})}))}},{key:"handleTableChange",value:function(e){var t=this,n=Object(S.gql)($());N.query({query:n,variables:{page:e.current,pageSize:e.pageSize}}).then((function(e){var n=e.data.companies.paginatorInfo.total,r=[];e.data.companies.data.forEach((function(e){return r.push({key:e.id,rating:e.rating,name:e.name,therm_screen:Object(a.jsx)(I.a,{twoToneColor:"#52c41a"}),face_masks:Object(a.jsx)(I.a,{twoToneColor:"#52c41a"}),hand_san:Object(a.jsx)(T.a,{twoToneColor:"orange"}),health_dec_form:Object(a.jsx)(T.a,{twoToneColor:"orange"})})})),t.setState({loading:!1,data:r,pagination:{total:n}})}))}},{key:"populateBuckets",value:function(){var e=this;N.query({query:Object(S.gql)(A())}).then((function(t){var n=[];t.data.buckets.forEach((function(t){var r=t.id,o=t.name,c=t.parameters;c.forEach((function(e){return L.push({key:e.id,title:e.name,dataIndex:e.name.toLowerCase().replace(/[ ]/g,"_"),group:e.name.toLowerCase(),category:e.category.name.toLowerCase()})})),L.forEach((function(t){e.state.category===t.category&&(e.state.airlineCols.push(t),F.push(t.title))}));var i=[];c.forEach((function(e){i.push(Object(a.jsx)(z,{children:e.name},e.id))})),n.push(Object(a.jsx)(B,{label:o,children:i},r)),i=[]})),e.setState({buckets:n,filteredCols:[].concat(Object(O.a)(L.filter((function(e){return"imageurl"===e.dataIndex}))),Object(O.a)(L.filter((function(e){return"Name"===e.title}))),Object(O.a)(L.filter((function(e){return"Rating"===e.title}))),Object(O.a)(e.state.airlineCols.slice(0,5))),defaultValue:Object(O.a)(F.slice(0,5))})}))}},{key:"handleSearch",value:function(e){var t=this;this.setState({loading:!0});var n=Object(S.gql)(M());N.query({query:n,variables:{searchInput:e}}).then((function(e){var n=[];e.data.companies.data.forEach((function(e){return n.push({key:e.id,rating:e.rating,imageurl:e.logo,name:e.name,thermal_screening:Object(a.jsx)(I.a,{twoToneColor:"#52c41a"}),face_masks:Object(a.jsx)(I.a,{twoToneColor:"#52c41a"}),hand_sanitizer:Object(a.jsx)(T.a,{twoToneColor:"orange"}),health_dec_form:Object(a.jsx)(T.a,{twoToneColor:"orange"})})})),t.setState({loading:!1,data:n})})).catch((function(e){return t.loadData()}))}},{key:"populateCountrySelect",value:function(){var e=this,t=Object(S.gql)(E());N.query({query:t}).then((function(t){var n=[];t.data.countries.forEach((function(e,t){return n.push(Object(a.jsx)(z,{value:e.name.toLowerCase(),children:e.name},t+1))})),e.setState({countries:[].concat(n)})}))}},{key:"countrySearch",value:function(e){var t=this;this.state.countries.forEach((function(n){n.props.value===e&&t.setState({countries:[n]})}))}},{key:"selectCountrySearch",value:function(e){var t=this,n=Object(S.gql)(q());N.query({query:n,variables:{country:e}}).then((function(e){var n=[];e.data.companies.data.forEach((function(e){return n.push({key:e.id,rating:e.rating,imageurl:e.logo,name:e.name,thermal_screening:Object(a.jsx)(I.a,{twoToneColor:"#52c41a"}),face_masks:Object(a.jsx)(I.a,{twoToneColor:"#52c41a"}),hand_sanitizer:Object(a.jsx)(T.a,{twoToneColor:"orange"}),health_dec_form:Object(a.jsx)(T.a,{twoToneColor:"orange"})})})),t.setState({loading:!1,data:n})})).catch((function(e){return t.loadData()}))}},{key:"render",value:function(){var e=this;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(k.a,{mode:"multiple",style:{width:"100%",marginBottom:"1em"},placeholder:"Select parameters",onChange:this.handleChange,defaultValue:this.state.defaultValue,children:this.state.buckets}),Object(a.jsx)(k.a,{showSearch:!0,style:{width:200,marginTop:"1em"},placeholder:"Select country",onSearch:function(t){return e.selectCountrySearch(t)},children:this.state.countries}),",",Object(a.jsx)(_.a,{placeholder:"Search",bordered:!1,style:{marginBottom:"2em",left:"80%"},onChange:function(t){return e.handleSearch(t.target.value)}}),Object(a.jsx)(w.a,{columns:this.state.filteredCols,dataSource:this.state.data,loading:this.state.loading,pagination:this.state.pagination,onChange:function(t){return e.handleTableChange(t)}})]})}}]),n}(r.Component),R=s.a.Footer,H=s.a.Content;var J=function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsxs)(s.a,{children:[Object(a.jsx)(p,{}),Object(a.jsx)(s.a,{children:Object(a.jsxs)(s.a,{children:[Object(a.jsx)(H,{style:{padding:"0 50px"},children:Object(a.jsx)("div",{className:"site-layout-content",children:Object(a.jsx)(V,{})})}),Object(a.jsx)(R,{style:{textAlign:"center"},children:"Safe Travel"})]})})]})})},G=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,398)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),o(e),c(e)}))};i.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(J,{})}),document.getElementById("root")),G()}},[[389,1,2]]]);
//# sourceMappingURL=main.2063c7c9.chunk.js.map